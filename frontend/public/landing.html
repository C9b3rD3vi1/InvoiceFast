<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <title>InvoiceFast - Automate Your Invoicing</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web@2.0.3"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --success: #10b981;
            --warning: #f59e0b;
            --gray-900: #0f172a;
            --gray-800: #1e293b;
            --gray-700: #334155;
            --gray-600: #475569;
            --gray-500: #64748b;
            --gray-400: #94a3b8;
            --gray-300: #cbd5e1;
            --gray-100: #f1f5f9;
            --gray-50: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Outfit', sans-serif;
            background: #0a0a0f;
            color: white;
            overflow-x: hidden;
        }

        /* Canvas Container */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1.5rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 800;
            color: white;
            text-decoration: none;
        }

        .logo i { color: var(--primary); }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            align-items: center;
        }

        .nav-link {
            color: var(--gray-400);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s;
        }

        .nav-link:hover { color: white; }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.5);
        }

        .btn-ghost {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .btn-ghost:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 8rem 3rem 4rem;
            position: relative;
            z-index: 1;
        }

        .hero-content {
            max-width: 600px;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(99, 102, 241, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: var(--primary-light);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(20px);
        }

        .hero h1 {
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 800;
            line-height: 1.05;
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(30px);
        }

        .hero h1 .gradient {
            background: linear-gradient(135deg, var(--primary-light) 0%, #a78bfa 50%, #f472b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--gray-400);
            margin-bottom: 2.5rem;
            line-height: 1.7;
            opacity: 0;
            transform: translateY(30px);
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            opacity: 0;
            transform: translateY(30px);
        }

        /* Comparison Section */
        .comparison {
            min-height: 100vh;
            padding: 6rem 3rem;
            position: relative;
            z-index: 1;
        }

        .section-title {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title h2 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .section-title p {
            color: var(--gray-400);
            font-size: 1.1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (max-width: 900px) {
            .comparison-grid { grid-template-columns: 1fr; }
        }

        .comparison-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 24px;
            padding: 2.5rem;
            backdrop-filter: blur(10px);
        }

        .comparison-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .comparison-card h3 i { font-size: 1.75rem; }

        .comparison-card.manual h3 { color: var(--warning); }
        .comparison-card.automated h3 { color: var(--success); }

        .comparison-card > p {
            color: var(--gray-400);
            margin-bottom: 2rem;
        }

        /* Manual Steps */
        .manual-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .manual-step {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .manual-step-num {
            width: 32px;
            height: 32px;
            background: var(--warning);
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .manual-step p {
            color: var(--gray-300);
            font-size: 0.95rem;
            margin: 0;
        }

        /* Automated Flow */
        .automated-flow {
            position: relative;
            padding: 1rem 0;
        }

        .flow-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            opacity: 0;
            transform: translateX(-20px);
        }

        .flow-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .flow-icon i { font-size: 1.25rem; }

        .flow-arrow {
            text-align: center;
            color: var(--success);
            font-size: 1.5rem;
            margin: 0.5rem 0;
            opacity: 0;
        }

        /* Animation Demo */
        .animation-demo {
            min-height: 100vh;
            padding: 6rem 3rem;
            position: relative;
            z-index: 1;
        }

        .demo-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 24px;
            padding: 3rem;
            position: relative;
            overflow: hidden;
        }

        .demo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .demo-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .demo-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--success);
            font-size: 0.9rem;
        }

        .demo-status .dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Invoice Animation Area */
        .invoice-path {
            position: relative;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .invoice-doc {
            position: absolute;
            width: 180px;
            background: white;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            transform: scale(0);
            opacity: 0;
        }

        .invoice-doc-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .invoice-doc-logo {
            width: 40px;
            height: 12px;
            background: var(--primary);
            border-radius: 4px;
        }

        .invoice-doc-line {
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            margin-bottom: 0.5rem;
        }

        .invoice-doc-line.short { width: 60%; }

        /* Nodes */
        .node {
            position: absolute;
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            opacity: 0;
        }

        .node-create { top: 50%; left: 5%; transform: translateY(-50%); }
        .node-email { top: 20%; left: 35%; }
        .node-whatsapp { top: 20%; right: 35%; }
        .node-mpesa { bottom: 20%; right: 25%; }
        .node-done { bottom: 50%; right: 5%; transform: translateY(50%); }

        .node.active {
            background: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.5);
        }

        /* Stats */
        .stats {
            padding: 6rem 3rem;
            position: relative;
            z-index: 1;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .stat-item {
            text-align: center;
            padding: 2rem;
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .stat-value {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--success) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray-400);
            font-size: 1rem;
        }

        /* CTA */
        .cta {
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 3rem;
            position: relative;
            z-index: 1;
        }

        .cta-content {
            text-align: center;
            max-width: 600px;
        }

        .cta h2 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .cta p {
            color: var(--gray-400);
            font-size: 1.15rem;
            margin-bottom: 2rem;
        }

        /* Footer */
        .footer {
            padding: 3rem;
            text-align: center;
            color: var(--gray-500);
            font-size: 0.9rem;
            border-top: 1px solid rgba(255,255,255,0.05);
            position: relative;
            z-index: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav { padding: 1rem 1.5rem; }
            .nav-links { display: none; }
            .hero { padding: 6rem 1.5rem 3rem; }
            .comparison, .animation-demo, .stats, .cta { padding: 4rem 1.5rem; }
            .comparison-card { padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>

    <!-- Navigation -->
    <nav class="nav">
        <a href="/" class="logo">
            <i class="ph ph-lightning"></i>
            InvoiceFast
        </a>
        <div class="nav-links">
            <a href="#comparison" class="nav-link">Compare</a>
            <a href="#demo" class="nav-link">See It In Action</a>
            <a href="#stats" class="nav-link">Results</a>
            <a href="/app" class="btn btn-ghost">Sign In</a>
            <a href="#" class="btn btn-primary" onclick="showAuth()">Start Free</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-badge">
                <i class="ph ph-sparkle"></i>
                AI-Powered Invoicing
            </div>
            <h1>Stop Chasing Payments. <span class="gradient">Start Getting Paid.</span></h1>
            <p>Transform your invoicing from manual chaos to automated magic. Create invoices once, and let InvoiceFast handle the rest—sending, following up, and collecting payments.</p>
            <div class="hero-buttons">
                <a href="#" class="btn btn-primary" onclick="showAuth()">
                    <i class="ph ph-rocket-launch"></i>
                    Start Free Trial
                </a>
                <a href="#demo" class="btn btn-ghost">
                    <i class="ph ph-play"></i>
                    See How It Works
                </a>
            </div>
        </div>
    </section>

    <!-- Comparison Section -->
    <section class="comparison" id="comparison">
        <div class="section-title">
            <h2>Manual vs. Automated</h2>
            <p>See the difference automation makes in your billing workflow</p>
        </div>
        
        <div class="comparison-grid">
            <div class="comparison-card manual">
                <h3><i class="ph ph-hourglass-medium"></i> Manual Process</h3>
                <p>The old way—time-consuming and prone to errors</p>
                
                <div class="manual-steps">
                    <div class="manual-step">
                        <div class="manual-step-num">1</div>
                        <p>Create invoice in spreadsheet or word processor</p>
                    </div>
                    <div class="manual-step">
                        <div class="manual-step-num">2</div>
                        <p>Export as PDF and format manually</p>
                    </div>
                    <div class="manual-step">
                        <div class="manual-step-num">3</div>
                        <p>Compose email, attach PDF, send</p>
                    </div>
                    <div class="manual-step">
                        <div class="manual-step-num">4</div>
                        <p>Wait... and wait... for payment</p>
                    </div>
                    <div class="manual-step">
                        <div class="manual-step-num">5</div>
                        <p>Send payment reminders (repeatedly)</p>
                    </div>
                    <div class="manual-step">
                        <div class="manual-step-num">6</div>
                        <p>Manually reconcile payments in spreadsheet</p>
                    </div>
                </div>
            </div>
            
            <div class="comparison-card automated">
                <h3><i class="ph ph-lightning"></i> With InvoiceFast</h3>
                <p>One click. Complete automation. Zero hassle.</p>
                
                <div class="automated-flow">
                    <div class="flow-item" data-step="1">
                        <div class="flow-icon"><i class="ph ph-check"></i></div>
                        <p><strong>Create invoice</strong> — fill in details, done</p>
                    </div>
                    <div class="flow-arrow" data-arrow="1">↓</div>
                    <div class="flow-item" data-step="2">
                        <div class="flow-icon"><i class="ph ph-send"></i></div>
                        <p><strong>Auto-sent</strong> — email & WhatsApp instantly</p>
                    </div>
                    <div class="flow-arrow" data-arrow="2">↓</div>
                    <div class="flow-item" data-step="3">
                        <div class="flow-icon"><i class="ph ph-bell-ringing"></i></div>
                        <p><strong>Auto-reminders</strong> — polite follow-ups scheduled</p>
                    </div>
                    <div class="flow-arrow" data-arrow="3">↓</div>
                    <div class="flow-item" data-step="4">
                        <div class="flow-icon"><i class="ph ph-currency-kes"></i></div>
                        <p><strong>M-Pesa received</strong> — instant notification</p>
                    </div>
                    <div class="flow-arrow" data-arrow="4">↓</div>
                    <div class="flow-item" data-step="5">
                        <div class="flow-icon"><i class="ph ph-check-circle"></i></div>
                        <p><strong>Auto-reconciled</strong> — all records updated</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Animation Demo -->
    <section class="animation-demo" id="demo">
        <div class="section-title">
            <h2>See It In Action</h2>
            <p>Watch how InvoiceFast automates your entire invoicing workflow</p>
        </div>
        
        <div class="demo-container">
            <div class="demo-header">
                <div class="demo-title">
                    <i class="ph ph-file-text"></i> Invoice #INV-2025-0142
                </div>
                <div class="demo-status">
                    <span class="dot"></span>
                    Automation Running
                </div>
            </div>
            
            <div class="invoice-path">
                <!-- Invoice Document -->
                <div class="invoice-doc" id="invoice">
                    <div class="invoice-doc-header">
                        <div class="invoice-doc-logo"></div>
                        <div style="width: 12px; height: 12px; background: #ef4444; border-radius: 50%;"></div>
                    </div>
                    <div class="invoice-doc-line"></div>
                    <div class="invoice-doc-line short"></div>
                    <div class="invoice-doc-line"></div>
                    <div class="invoice-doc-line short"></div>
                </div>
                
                <!-- Nodes -->
                <div class="node node-create" id="node-create">
                    <i class="ph ph-plus"></i>
                </div>
                <div class="node node-email" id="node-email">
                    <i class="ph ph-envelope"></i>
                </div>
                <div class="node node-whatsapp" id="node-whatsapp">
                    <i class="ph ph-whatsapp-logo"></i>
                </div>
                <div class="node node-mpesa" id="node-mpesa">
                    <i class="ph ph-currency-kes"></i>
                </div>
                <div class="node node-done" id="node-done">
                    <i class="ph ph-check"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats" id="stats">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-value" data-target="87">0%</div>
                <div class="stat-label">Faster Payment Collection</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" data-target="42">0%</div>
                <div class="stat-label">Time Saved Weekly</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" data-target="3">0x</div>
                <div class="stat-label">More Invoices Sent</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" data-target="99">0%</div>
                <div class="stat-label">Client Satisfaction</div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta">
        <div class="cta-content">
            <h2>Ready to Automate Your Invoicing?</h2>
            <p>Join thousands of Kenyan businesses saving time and getting paid faster.</p>
            <a href="#" class="btn btn-primary" onclick="showAuth()" style="font-size: 1.1rem; padding: 1rem 2.5rem;">
                <i class="ph ph-rocket-launch"></i>
                Start Free Today
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>© 2025 InvoiceFast. Made with ❤️ in Kenya. <a href="/app" style="color: var(--primary-light);">Go to App →</a></p>
    </footer>

    <script>
        // ==================== THREE.JS BACKGROUND ====================
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // Create particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 500;
        const posArray = new Float32Array(particlesCount * 3);
        
        for(let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 10;
        }
        
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.02,
            color: 0x6366f1,
            transparent: true,
            opacity: 0.8,
        });
        
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        // Create connection lines
        const linesMaterial = new THREE.LineBasicMaterial({
            color: 0x6366f1,
            transparent: true,
            opacity: 0.1
        });

        // Add some floating shapes
        const shapes = [];
        const shapeGeometries = [
            new THREE.TorusGeometry(0.3, 0.1, 16, 32),
            new THREE.OctahedronGeometry(0.25),
            new THREE.IcosahedronGeometry(0.25),
        ];

        for (let i = 0; i < 8; i++) {
            const geometry = shapeGeometries[i % 3];
            const material = new THREE.MeshBasicMaterial({
                color: i % 2 === 0 ? 0x6366f1 : 0x10b981,
                wireframe: true,
                transparent: true,
                opacity: 0.3
            });
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(
                (Math.random() - 0.5) * 8,
                (Math.random() - 0.5) * 8,
                (Math.random() - 0.5) * 5 - 2
            );
            mesh.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, 0);
            shapes.push(mesh);
            scene.add(mesh);
        }

        camera.position.z = 4;

        // Mouse interaction
        let mouseX = 0;
        let mouseY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            const time = Date.now() * 0.001;
            
            // Rotate particles
            particlesMesh.rotation.y = time * 0.05;
            particlesMesh.rotation.x = time * 0.02;
            
            // Move shapes
            shapes.forEach((shape, i) => {
                shape.rotation.x += 0.005 * (i + 1);
                shape.rotation.y += 0.007 * (i + 1);
                shape.position.y += Math.sin(time + i) * 0.001;
            });
            
            // Mouse follow
            camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.02;
            camera.position.y += (mouseY * 0.5 - camera.position.y) * 0.02;
            camera.lookAt(scene.position);
            
            renderer.render(scene, camera);
        }
        
        animate();

        // Handle resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // ==================== GSAP ANIMATIONS ====================
        gsap.registerPlugin(ScrollTrigger);

        // Hero animations
        gsap.to('.hero-badge', { opacity: 1, y: 0, duration: 0.8, delay: 0.2 });
        gsap.to('.hero h1', { opacity: 1, y: 0, duration: 0.8, delay: 0.4 });
        gsap.to('.hero p', { opacity: 1, y: 0, duration: 0.8, delay: 0.6 });
        gsap.to('.hero-buttons', { opacity: 1, y: 0, duration: 0.8, delay: 0.8 });

        // Flow items animation
        gsap.utils.toArray('.flow-item').forEach((item, i) => {
            gsap.to(item, {
                scrollTrigger: {
                    trigger: item,
                    start: 'top 80%',
                },
                opacity: 1,
                x: 0,
                duration: 0.6,
                delay: i * 0.1
            });
        });

        // Flow arrows
        gsap.utils.toArray('.flow-arrow').forEach((arrow, i) => {
            gsap.to(arrow, {
                scrollTrigger: {
                    trigger: arrow,
                    start: 'top 80%',
                },
                opacity: 1,
                duration: 0.4,
                delay: 0.3 + i * 0.1
            });
        });

        // Stats counter animation
        gsap.utils.toArray('.stat-value').forEach(stat => {
            const target = parseInt(stat.dataset.target);
            gsap.to(stat, {
                scrollTrigger: {
                    trigger: stat,
                    start: 'top 85%',
                },
                innerHTML: target,
                duration: 2,
                snap: { innerHTML: 1 },
                onUpdate: function() {
                    const val = Math.round(this.targets()[0].innerHTML);
                    const suffix = stat.dataset.target.includes('x') ? 'x' : 
                                   stat.dataset.target.includes('%') ? '%' : '';
                    stat.innerHTML = val + suffix;
                }
            });
        });

        // ==================== INVOICE FLOW ANIMATION ====================
        function runInvoiceAnimation() {
            const timeline = gsap.timeline({ repeat: -1, repeatDelay: 2 });
            
            // Reset
            timeline.set('#invoice', { scale: 0, opacity: 0, x: 0, y: 0 });
            timeline.set('.node', { opacity: 0, scale: 0 });
            
            // 1. Create Invoice
            timeline.to('#node-create', { opacity: 1, scale: 1, duration: 0.5 });
            timeline.to('#invoice', { scale: 1, opacity: 1, duration: 0.8, ease: 'back.out(1.7)' });
            timeline.to('#node-create', { opacity: 0.3, scale: 0.8, duration: 0.3 });
            
            // 2. Send Email
            timeline.to('#node-email', { opacity: 1, scale: 1, duration: 0.5 });
            timeline.to('#invoice', { x: 150, y: -80, duration: 1, ease: 'power2.inOut' });
            timeline.to('#node-email', { opacity: 0.3, scale: 0.8, duration: 0.3 });
            
            // 3. Send WhatsApp
            timeline.to('#node-whatsapp', { opacity: 1, scale: 1, duration: 0.5 });
            timeline.to('#invoice', { x: 150, y: 80, duration: 1, ease: 'power2.inOut' });
            timeline.to('#node-whatsapp', { opacity: 0.3, scale: 0.8, duration: 0.3 });
            
            // 4. M-Pesa Payment
            timeline.to('#node-mpesa', { opacity: 1, scale: 1, duration: 0.5 });
            timeline.to('#invoice', { x: 0, y: 150, duration: 1, ease: 'power2.inOut' });
            
            // Pulse effect on M-Pesa
            timeline.to('#node-mpesa', { 
                boxShadow: '0 0 40px rgba(16, 185, 129, 0.8)', 
                duration: 0.3,
                yoyo: true,
                repeat: 3
            });
            
            // 5. Done
            timeline.to('#node-done', { opacity: 1, scale: 1, duration: 0.5 });
            timeline.to('#invoice', { 
                scale: 1.3, 
                opacity: 0, 
                duration: 0.5,
                ease: 'power2.in'
            });
            
            // Reset
            timeline.to('.node', { opacity: 0, scale: 0, duration: 0.3 });
            
            return timeline;
        }

        // Start animation when demo is visible
        ScrollTrigger.create({
            trigger: '.animation-demo',
            start: 'top 70%',
            onEnter: () => runInvoiceAnimation()
        });

        // ==================== AUTH ====================
        function showAuth() {
            window.location.href = '/app';
        }
    </script>
</body>
</html>
